- 前端：TypeScript + React + Vite；上传后直接调用 Nano Banana 生图模型按固定提示词生成星露谷风预览；Canvas/SVG 负责识别框与便签叠加，并在模型失败时回退本地像素滤镜占位；Zustand 管状态，上传支持拖拽/拍照。
- 像素滤镜：主要依赖 Nano Banana 生图输出星露谷像素风；后端使用同一模型结果并用 Pillow 再叠加标签/时间/金币，保证落盘与预览一致；本地 Canvas 滤镜仅作为失败兜底。
- 后端：Python + FastAPI 负责编排与持久化，不做本地推理；使用外部模型/检测/文案服务。
- 对象检测：选用 Azure Computer Vision API 获取多物体框，默认选最大框。
- 文案生成：调用外部大模型 API（可复用 skills 的文案生成工具）；失败/限流时用模板兜底。
- 图合成：Nano Banana 生图结果 + Pillow 叠加标签/时间/金币，生成最终作品。
- 数据与文件：Supabase Storage 仅存最终合成图；Postgres 记录作品 ID、用户 ID、合成图 URL、创建时间（用于排序）。不存原图及其它元数据；需登录时接 Supabase Auth。
- 尺寸规范：上传后等比缩放至长边约 1280px（区间 720–1600px），过大缩小、过小放大。
- API 调用层：统一封装第三方 API 客户端（重试/限速/错误兜底），密钥走环境变量；优先复用已有 skills 的封装。
